<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"
          name="viewport"/>
    <meta content="ie=edge" http-equiv="X-UA-Compatible">
    <title>登录</title>
    <script>
        if (window !== top) top.location.replace(location.href);
    </script>
    <meta charset="utf-8"/>
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"/>
    <meta content="width=device-width, initial-scale=1, maximum-scale=1" name="viewport"/>
    <link href="../resources/icons/pivotal-cloud.ico" rel="icon"/>
    <title>登录 - 顺盈云商城管理平台</title>
    <link href="../public/css/public.css" rel="stylesheet">
    <link href="../component/swiper-3.4.2/styles/swiper.min.css" rel="stylesheet">
    <link href="../resources/fonts/iconfont.css" rel="stylesheet">
    <link href="../public/css/console-ui.css" rel="stylesheet">
</head>
<body>
<div class="swiper-container landing-swiper">
    <div class="swiper-wrapper">
        <div class="swiper-slide">
            <img alt="" src="../resources/images/background-one.png">
        </div>
        <div class="swiper-slide">
            <img alt="" src="../resources/images/background-two.png">
        </div>
        <div class="swiper-slide">
            <img alt="" src="../resources/images/background-three.png">
        </div>
    </div>
</div>

<div class="landing-into">
    <p class="into-title"><i>欢迎使用</i>顺盈商城管理云平台</p>
    <p class="into-vip">——— <i>账号密码登录</i> ———</p>

    <div class="into-input into-input-top">
        <i class="iconfont icon-touxiang"></i>
        <input autocomplete="off"  id="account" name="account"lay-verType="tips" lay-verify="required" placeholder="请输入用户名" type="text">
    </div>
    <div class="into-input into-input-bot">
        <i class="iconfont icon-mima"></i>
        <input autocomplete="off"  id="password" name="password" lay-verType="tips" lay-verify="required" placeholder="请输入密码" placeholder-color="#eee" type="password">
    </div>

    <div class="into-check">
        <div class="into-check-left">
            <input id="checkbox-id" name="auto" type="checkbox">
        </div>
        <p>下次自动登陆</p>
    </div>
    <a href="#" id="login"><p class="into-but">登录</p></a>
</div>

<div class="landing-footer">
    <p> Copyright © 2018-2020 Pivotal Cloud 云技术团队 all rights reserved.</p>
</div>

<script src="../component/jquery-3.5.1/dist/jquery.min.js" type="text/javascript"></script>
<script src="../component/swiper-3.4.2/dist/swiper.min.js"></script>
<script src="../component/layui-2.5.5/dist/layui.all.js" type="text/javascript"></script>
<script src="../public/js/utils.js" type="text/javascript"></script>

<script>
    //swiper轮播
    var swiper = new Swiper('.swiper-container', {
        autoplay: 3000,
        loop: true,
        speed: 1000,
        effect: 'fade'
    });
    //输入框样式
    $(function () {

        //已登陆的直接跳转到主页
        $.ajax({
            type: 'post',
            url: utils.consoleApiUrl+'/api/console/home/isLogin',
            dataType: 'json',
            success: function (data) {
                if (data.code == "200") {
                    window.location.href = "../view/index.html?v=001";
                }

            }
        });
        $('.into-input input').focus(function () {//获取焦点时
            $(this).parent().css('border', '1px solid #4fb0c0')
            $(this).parent().find('i').css('color', '#4fb0c0')
        })
        $('.into-input input').blur(function () {//失去焦点时
            $(this).parent().css('border', '1px solid #b2b2b2')
            $('.into-input-bot').css('border-top', '0')
            $(this).parent().find('i').css('color', '#b2b2b2')
        })
    });
    $("#login").click(function () {
        var account = $("input[name='account']").val();
        var password = $("input[name='password']").val();
        var auto = 0;
        if (account == "" || account == null) {
            layer.alert("账号不能为空！");
            return false;
        }
        if (password == "" || password == null) {
            layer.alert("密码不能为空！");
            return false;
        }
        if ($('#checkbox-id').is(':checked')) {
            auto = 1;
        }
        $.ajax({
            type: 'post',
            url: utils.passportApiUrl+'/api/console/center/login',
            data: {account: account, password: password, auto: auto},
            dataType: 'json',
            error: function (error) {
                console.log(error);
            },
            success: function (data) {
                console.log(data);
                if (data.code == "500") {
                    layer.alert(data.message);
                } else if (data.code == "200") {
                    window.location.href = "../view/index.html?v=001";
                }

            }
        });
    });

    $("body").keydown(function () {
        if (event.keyCode == "13") {//keyCode=13是回车键
            $("#login").click();
        }
    });

</script>
</body>
</html>